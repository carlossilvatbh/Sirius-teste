import{d as fs,r as i,c as P,o as M,w as ps,a as r,b as c,e as s,f as y,n as b,g as I,h as U,v as bs,F as C,i as L,t as v,j as gs,k as j,l as A,m as ms,p as ys}from"./vendor-GMp0vOD5.js";(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const f of n.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&l(f)}).observe(document,{childList:!0,subtree:!0});function k(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(o){if(o.ep)return;o.ep=!0;const n=k(o);fetch(o.href,n)}})();const Cs={class:"app-container"},ks={class:"app-header"},hs={class:"header-actions"},Ss=["disabled"],ws=["disabled"],_s={class:"app-main"},Ds={class:"sidebar-content"},Os={class:"search-filters"},Ls={class:"search-container"},Es={class:"filter-controls"},Ts=["onClick"],Fs={class:"structures-list"},Ns=["onDragstart","onClick"],xs={class:"structure-icon"},Ps={class:"structure-info"},Ms={class:"structure-meta"},Is={class:"type"},Us={class:"cost"},js={key:0,class:"empty-state"},As={class:"canvas-area"},Rs={class:"canvas-toolbar"},$s={class:"toolbar-section"},Bs={class:"btn-group"},zs=["disabled"],Js=["disabled"],Vs={class:"btn-group"},Ys={class:"toolbar-section"},qs={class:"stats-display"},Gs={class:"stats-item"},Ks={class:"stats-value"},Qs={class:"stats-item"},Ws={class:"stats-value success"},Xs={key:0,class:"connecting-mode-indicator"},Zs={class:"canvas-elements"},Hs=["onClick"],se={class:"element-header"},ee=["onClick"],te={class:"element-body"},ae={class:"element-meta"},oe={class:"type"},le={class:"cost"},ne={key:0,class:"canvas-empty"},ie={key:0,class:"loading-overlay"},re={class:"toast-container"},ce=["onClick"],ue=fs({__name:"SiriusApp",setup($){const u=i(!1),k=i([]),l=i([]),o=i(null),n=i(null),f=i(""),h=i(""),E=i(!1),S=i(!1),w=i(!1),g=i(1),_=i("basico"),D=i([]),F=P(()=>{let t=k.value;return f.value&&(t=t.filter(e=>e.name.toLowerCase().includes(f.value.toLowerCase())||e.description.toLowerCase().includes(f.value.toLowerCase()))),h.value&&(t=t.filter(e=>e.type===h.value)),t}),B=P(()=>l.value.reduce((t,e)=>t+e.cost,0)),z=i(!1),J=i(!1),V=[{label:"All",value:""},{label:"DAO",value:"BDAO_SAC"},{label:"LLC",value:"WYOMING_LLC"},{label:"Foundation",value:"FOUNDATION"},{label:"Corporation",value:"CORP"}],Y=async()=>{u.value=!0;try{const t=await fetch("/api/estruturas/");if(!t.ok)throw new Error("Failed to load structures");k.value=await t.json(),p("Structures loaded successfully","success")}catch(t){console.error("Error loading structures:",t),p("Failed to load structures","error")}finally{u.value=!1}},N=()=>{E.value=!E.value},O=()=>{S.value=!S.value},q=()=>{w.value=!w.value},G=()=>{f.value=""},K=t=>{h.value=t},Q=t=>{o.value=t},W=t=>{n.value=t},X=(t,e)=>{e.dataTransfer&&e.dataTransfer.setData("application/json",JSON.stringify(t))},Z=t=>{var a;t.preventDefault();const e=(a=t.dataTransfer)==null?void 0:a.getData("application/json");if(e){const d=JSON.parse(e),m=t.currentTarget.getBoundingClientRect(),us=t.clientX-m.left,ds=t.clientY-m.top,vs={...d,id:Date.now().toString(),x:us-100,y:ds-50};l.value.push(vs),p("Structure added to canvas","success")}},H=t=>{var e;l.value=l.value.filter(a=>a.id!==t),((e=n.value)==null?void 0:e.id)===t&&(n.value=null),p("Structure removed","info")},ss=()=>{l.value.length>0&&(l.value=[],n.value=null,p("Canvas cleared","info"))},es=()=>{g.value=Math.min(g.value+.1,2)},ts=()=>{g.value=Math.max(g.value-.1,.5)},as=()=>{g.value=1},os=()=>{p("Undo functionality coming soon","info")},ls=()=>{p("Redo functionality coming soon","info")},ns=async()=>{u.value=!0;try{if(!(await fetch("/api/salvar-configuracao/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({elements:l.value,scenario:_.value})})).ok)throw new Error("Failed to save configuration");p("Configuration saved successfully","success")}catch(t){console.error("Error saving configuration:",t),p("Failed to save configuration","error")}finally{u.value=!1}},is=async()=>{u.value=!0;try{const t=await fetch("/api/gerar-pdf/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({elements:l.value,scenario:_.value})});if(!t.ok)throw new Error("Failed to generate PDF");const e=await t.blob(),a=window.URL.createObjectURL(e),d=document.createElement("a");d.href=a,d.download="sirius-configuration.pdf",d.click(),window.URL.revokeObjectURL(a),p("PDF generated successfully","success")}catch(t){console.error("Error generating PDF:",t),p("Failed to generate PDF","error")}finally{u.value=!1}},p=(t,e)=>{const a={id:Date.now().toString(),message:t,type:e};D.value.push(a),setTimeout(()=>{x(a.id)},3e3)},x=t=>{D.value=D.value.filter(e=>e.id!==t)},rs=t=>{switch(t){case"success":return"fas fa-check-circle";case"error":return"fas fa-exclamation-circle";case"warning":return"fas fa-exclamation-triangle";case"info":return"fas fa-info-circle";default:return"fas fa-info-circle"}};M(()=>{Y()}),ps(()=>{l.value.length>0&&localStorage.setItem("sirius-canvas-elements",JSON.stringify(l.value))});const cs=()=>{const t=localStorage.getItem("sirius-canvas-elements");if(t)try{l.value=JSON.parse(t)}catch(e){console.error("Error loading persisted state:",e)}};return M(()=>{cs()}),(t,e)=>(c(),r(C,null,[s("div",Cs,[s("header",ks,[s("div",{class:"header-brand"},[s("button",{class:"sidebar-toggle mobile-only",onClick:O,"aria-label":"Toggle sidebar"},e[4]||(e[4]=[s("i",{class:"fas fa-bars"},null,-1)])),e[5]||(e[5]=s("div",{class:"brand-logo"},[s("i",{class:"fas fa-layer-group"})],-1)),e[6]||(e[6]=s("div",{class:"brand-text"},[s("h1",null,"SIRIUS Canvas"),s("p",{class:"desktop-only"},"Legal Structure Designer")],-1))]),s("div",hs,[s("button",{onClick:ns,class:"btn btn-success btn-sm",disabled:u.value},e[7]||(e[7]=[s("i",{class:"fas fa-save"},null,-1),s("span",{class:"desktop-only"},"Save",-1)]),8,Ss),s("button",{onClick:is,class:"btn btn-secondary btn-sm",disabled:u.value},e[8]||(e[8]=[s("i",{class:"fas fa-file-pdf"},null,-1),s("span",{class:"desktop-only"},"Export",-1)]),8,ws),s("button",{class:"sidebar-toggle desktop-only",onClick:N,"aria-label":"Toggle sidebar"},e[9]||(e[9]=[s("i",{class:"fas fa-sidebar"},null,-1)]))])]),s("main",_s,[S.value?(c(),r("div",{key:0,class:"sidebar-overlay",onClick:O})):y("",!0),s("aside",{class:b(["sidebar",{collapsed:E.value,"mobile-open":S.value}])},[s("div",{class:"sidebar-header"},[e[12]||(e[12]=s("h2",null,[s("i",{class:"fas fa-layer-group"}),I(" Structure Library ")],-1)),e[13]||(e[13]=s("p",null,"Drag structures to canvas to build your configuration",-1)),s("button",{class:"sidebar-toggle desktop-only",onClick:N},e[10]||(e[10]=[s("i",{class:"fas fa-chevron-left"},null,-1)])),s("button",{class:"sidebar-close mobile-only",onClick:O},e[11]||(e[11]=[s("i",{class:"fas fa-times"},null,-1)]))]),s("div",Ds,[s("div",Os,[s("div",Ls,[U(s("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>f.value=a),type:"text",placeholder:"Search structures...",class:"search-input"},null,512),[[bs,f.value]]),e[15]||(e[15]=s("i",{class:"fas fa-search search-icon"},null,-1)),f.value?(c(),r("button",{key:0,onClick:G,class:"search-clear"},e[14]||(e[14]=[s("i",{class:"fas fa-times"},null,-1)]))):y("",!0)]),s("div",Es,[(c(),r(C,null,L(V,a=>s("button",{key:a.value,onClick:d=>K(a.value),class:b(["filter-tag",{active:h.value===a.value}])},v(a.label),11,Ts)),64))])]),s("div",Fs,[(c(!0),r(C,null,L(F.value,a=>{var d;return c(),r("div",{key:a.id,class:b(["structure-card",{selected:((d=o.value)==null?void 0:d.id)===a.id}]),draggable:!0,onDragstart:m=>X(a,m),onClick:m=>Q(a)},[s("div",xs,[s("i",{class:b(a.icon||"fas fa-building")},null,2)]),s("div",Ps,[s("h3",null,v(a.name),1),s("p",null,v(a.description),1),s("div",Ms,[s("span",Is,v(a.type),1),s("span",Us,"$"+v(a.cost),1)])])],42,Ns)}),128))]),F.value.length===0?(c(),r("div",js,e[16]||(e[16]=[s("div",{class:"icon"},[s("i",{class:"fas fa-search"})],-1),s("h3",null,"No structures found",-1),s("p",null,"Try adjusting your search or filter criteria",-1)]))):y("",!0)])],2),s("section",As,[s("div",Rs,[s("div",$s,[s("div",Bs,[s("button",{onClick:ss,class:"btn btn-outline btn-sm"},e[17]||(e[17]=[s("i",{class:"fas fa-trash"},null,-1),s("span",{class:"desktop-only"},"Clear",-1)])),s("button",{onClick:os,class:"btn btn-outline btn-sm",disabled:!z.value},e[18]||(e[18]=[s("i",{class:"fas fa-undo"},null,-1)]),8,zs),s("button",{onClick:ls,class:"btn btn-outline btn-sm",disabled:!J.value},e[19]||(e[19]=[s("i",{class:"fas fa-redo"},null,-1)]),8,Js)]),s("div",Vs,[s("button",{onClick:ts,class:"btn btn-outline btn-sm"},e[20]||(e[20]=[s("i",{class:"fas fa-search-minus"},null,-1)])),s("button",{onClick:as,class:"btn btn-outline btn-sm"},[s("span",null,v(Math.round(g.value*100))+"%",1)]),s("button",{onClick:es,class:"btn btn-outline btn-sm"},e[21]||(e[21]=[s("i",{class:"fas fa-search-plus"},null,-1)]))]),s("button",{onClick:q,class:b(["btn btn-ghost btn-sm",{active:w.value}])},e[22]||(e[22]=[s("i",{class:"fas fa-link"},null,-1),s("span",{class:"desktop-only"},"Connect",-1)]),2)]),e[26]||(e[26]=s("div",{class:"toolbar-separator"},null,-1)),s("div",Ys,[s("div",qs,[s("div",Gs,[e[23]||(e[23]=s("span",{class:"stats-label"},"Elements",-1)),s("span",Ks,v(l.value.length),1)]),s("div",Qs,[e[24]||(e[24]=s("span",{class:"stats-label"},"Total Cost",-1)),s("span",Ws,"$"+v(B.value),1)])]),U(s("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>_.value=a),class:"filter-select"},e[25]||(e[25]=[s("option",{value:"basico"},"Basic",-1),s("option",{value:"completo"},"Complete",-1),s("option",{value:"premium"},"Premium",-1)]),512),[[gs,_.value]])])]),w.value?(c(),r("div",Xs,e[27]||(e[27]=[s("i",{class:"fas fa-link"},null,-1),s("span",null,"Connection Mode Active",-1)]))):y("",!0),s("div",{class:"canvas-container",onDrop:Z,onDragover:e[2]||(e[2]=j(()=>{},["prevent"])),onDragenter:e[3]||(e[3]=j(()=>{},["prevent"]))},[s("div",{class:"canvas-content",style:A({transform:`scale(${g.value})`})},[e[33]||(e[33]=s("div",{class:"canvas-grid"},null,-1)),s("div",Zs,[(c(!0),r(C,null,L(l.value,a=>{var d;return c(),r("div",{key:a.id,class:b(["canvas-element",{selected:((d=n.value)==null?void 0:d.id)===a.id}]),style:A({left:a.x+"px",top:a.y+"px"}),onClick:m=>W(a)},[s("div",se,[s("i",{class:b(a.icon||"fas fa-building")},null,2),s("span",null,v(a.name),1),s("button",{onClick:m=>H(a.id),class:"remove-btn"},e[28]||(e[28]=[s("i",{class:"fas fa-times"},null,-1)]),8,ee)]),s("div",te,[s("p",null,v(a.description),1),s("div",ae,[s("span",oe,v(a.type),1),s("span",le,"$"+v(a.cost),1)])])],14,Hs)}),128))]),l.value.length===0?(c(),r("div",ne,[e[30]||(e[30]=s("div",{class:"icon"},[s("i",{class:"fas fa-network-wired"})],-1)),e[31]||(e[31]=s("h3",null,"Start Building Your Structure",-1)),e[32]||(e[32]=s("p",null,"Drag legal structures from the sidebar to begin designing your optimal configuration",-1)),s("button",{class:"btn btn-primary mobile-only",onClick:O},e[29]||(e[29]=[s("i",{class:"fas fa-plus"},null,-1),I(" Add Structure ")]))])):y("",!0)],4)],32)])])]),u.value?(c(),r("div",ie,e[34]||(e[34]=[s("div",{class:"loading-content"},[s("div",{class:"loading-spinner"}),s("p",null,"Loading SIRIUS...")],-1)]))):y("",!0),s("div",re,[(c(!0),r(C,null,L(D.value,a=>(c(),r("div",{key:a.id,class:b(["toast",a.type])},[s("i",{class:b(rs(a.type))},null,2),s("span",null,v(a.message),1),s("button",{onClick:d=>x(a.id)},e[35]||(e[35]=[s("i",{class:"fas fa-times"},null,-1)]),8,ce)],2))),128))])],64))}}),T=document.createElement("link");T.rel="stylesheet";T.href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css";document.head.appendChild(T);const R=ms(ue);R.use(ys());R.mount("#app");console.log("🚀 SIRIUS Canvas v2.0 - Initialized successfully!");
